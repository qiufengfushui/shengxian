"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery||Zepto)}(function(e){var t={},n={};t.OPENING=!1,t._OPTIONS={title:!1,animateIn:!1,animateOut:!1,onSubmit:!1,onCancel:!1,required:!1},t.tplBase='<div class="gdialog-wrap">',t.tplBase+='<div class="gdialog-container">',t.tplBase+="{{HEADER}}",t.tplBase+='<div class="gdialog-content">{{message}}{{INPUT}}</div>',t.tplBase+='<div class="gdialog-button-group">{{BUTTON_CANCEL}} <button class="button button-ok">Ok</button></div>',t.tplBase+="</div>",t.tplBase+="</div>",t.tplHeader='<div class="gdialog-header">{{title}}</div>',t.tplInput='<div class="gdialog-field"><input type="text"></div>',t.getTeplate=function(e,n,i){var o=t.tplBase;return o="alert"!==e?o.replace("{{BUTTON_CANCEL}}",'<button class="button button-cancel">Cancel</button>'):o.replace("{{BUTTON_CANCEL}}",""),o="prompt"==e?o.replace("{{INPUT}}",t.tplInput):o.replace("{{INPUT}}",""),o=i.title?o.replace("{{HEADER}}",t.tplHeader.replace("{{title}}",i.title)):o.replace("{{HEADER}}",""),o=o.replace("{{message}}",n)},t.clear=function(){e(".gdialog-shadow").length?e(".gdialog-shadow").remove():"",e(".gdialog-wrap").length?e(".gdialog-wrap").remove():""},t.Dialog=function(){var n=this;n.close=function(){e(".gdialog-shadow").addClass("animated fadeOut"),n.options.animateOut?(n.options.animateIn&&n.container.find(".gdialog-container").removeClass(n.options.animateIn),n.container.find(".gdialog-container").addClass("animated "+n.options.animateOut),setTimeout(function(){n.container.removeClass("is-active"),n.container.remove(),t.OPENING=!1,e(".gdialog-shadow").remove()},800)):(n.container.remove(),t.OPENING=!1,e(".gdialog-shadow").remove())},n.addEvents=function(){n.btnOk.on("click",function(e){e.preventDefault();var t=!1;if(n.field.length){if(1==n.options.required&&!n.field.val().length)return n.field.addClass("is-invalid"),!1;n.field.removeClass("is-invalid"),t=n.field.val()}else t=!0;"function"==typeof n.options.onSubmit&&n.options.onSubmit(t),n.close()}),n.btnCancel.on("click",function(e){e.preventDefault();var t=!1;n.field.length&&0!==n.field.val().length&&(t=n.field.val()),"function"==typeof n.options.onCancel&&n.options.onCancel(t),n.close()})},this.init=function(i,o,a,l){t.OPENING&&e(".gdialog-shadow, .gdialog-wrap").remove(),t.clear(),n.options=t.getOptions(a),e("body").append('<div class="gdialog-shadow"></div> '+t.getTeplate(i,o,n.options)),n.container=e("body").find(".gdialog-wrap"),n.btnOk=n.container.find(".button-ok"),n.btnCancel=n.container.find(".button-cancel"),n.field=n.container.find("input"),l&&n.field.length&&n.field.val(l),n.container.addClass("is-active").css({top:e(window).scrollTop()+50}),n.options.animateIn&&n.container.find(".gdialog-container").addClass("animated "+n.options.animateIn),t.OPENING=!0,n.addEvents()}},t.getOptions=function(n){var i=e.extend({},t._OPTIONS);return"object"==typeof n&&e.each(n,function(e,t){void 0!==i[e]?i[e]=t:console.error('The option "'+e+'" not exist.')}),i},n.alert=function(e,n){var e=e||"",n=n||{},i=new t.Dialog;i.init("alert",e,n)},n.confirm=function(e,n){var e=e||"",n=n||{},i=new t.Dialog;i.init("confirm",e,n)},n.prompt=function(e,n,i){var e=e||"",i=i||{},o=new t.Dialog;o.init("prompt",e,i,n)},n.config=function(n){return"object"!=typeof n?!1:void e.each(n,function(e,n){void 0!==t._OPTIONS[e]?t._OPTIONS[e]=n:console.error('The option "'+e+'" not exist.')})},e.gDialog=e.gDialog||n});